<div class="main">
	<div class="block_side">
	</div>
	<div class="block_main">	
		<div style="height:50px;"></div>
		<div class="a1">
          <div class="a4">
            <div class="d1">
              <div class="d4"></div>
            </div>
          </div>
          <div class="a5">
			<div class="test_radio03">
				<span>
					<div class="tango01">	
						<div class="bar_post">	
							<div class="bar_smoke"></div>					
							<div class="box_tests04">
								<div class="pro13">
									<div style="text-align:left;">
										<a href="javascript:void(0);" onclick="window.history.back();">
								        	<span class="font_blue_max"><i class="fas fa-chevron-left"></i></span>
								        </a>										
									</div>
								</div>
								<div class="pro14">
									<div class="contain_title02" style="text-align:center;">
										<div class="font_white">
											ブック/コミックを投稿
										</div>
									</div>
								</div>
								<div class="pro15">
									<div style="text-align:right;">
									</div>
								</div>
							</div>
						</div>
						<div class="height07"></div>
						<div class="nmn" style="text-align:center;width:100%;padding:10px;">
							<form action="#">
								<input id="inc_search" placeholder="&#xf002; 検索する" type="text" required="" >
							</form>
						</div>
						<div class="box_tests03">
							<div class="pro12">
								<span class="font_gray">提供：RakutenBooks</span>
							</div>
						</div>
						<div id='book_list'>
						  <%= render partial: 'book_list' %>
						</div>
						<div style="height:100px;"></div>
					</div>
				</span>
			</div>
		  </div>
		</div>
	</div>
	<div class="block_side">
	</div>
</div>

<script type="text/javascript">
	$(function(){
		var
		preFunc = null,
		preInput = '',
		input = '',
		ajaxPost = function(input)
		{
		  $.ajax({
		    url: "ajax_book_list",
		      type: "GET",
		      data: ("q=" + input)
		  });
		};

		$('#inc_search').keyup(function() {
		  input = $(this).val();   //前後の不要な空白を削除
		  if(preInput !== input){
		    clearTimeout(preFunc);
		    preFunc = setTimeout(ajaxPost(input), 500);
		  }
		  preInput = input;
		});

		$('#inc_search').keypress(function(e) {
			if ( e.which == 13 ) {
			// ここに処理を書く
			clearTimeout(preFunc);
		    preFunc = setTimeout(ajaxPost(input), 0);
			// スマホのキーボードを閉じる
			  $("#inc_search").blur();
			   return false;
			}
		})
	});
</script>
