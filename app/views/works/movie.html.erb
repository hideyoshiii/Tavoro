<% if user_signed_in? %>
  <style>
    .bar_top{display:none;}
  </style>
  <div class="bar_back">			
  	<div style="padding-top:15px;">
  		<div class="inline_block_middle" style="width:15%;">
  			<div style="text-align:left;padding-left:15px;">
  				<a href="javascript:void(0);" onclick="window.history.back();">
  		        	<%= image_tag "left_C2C2C2.svg", :style =>'width:15px;height:15px;' %>
  		        </a>										
  			</div>
  		</div>
  		<div class="inline_block_middle" style="width:70%;">
  			<div class="contain_title02" style="text-align:center;">
  				<div style="font-size:14px;color:#c2c2c2;">
  					映画/テレビを投稿
  				</div>
  			</div>
  		</div>
  		<div class="inline_block_middle" style="width:15%;">
  			<div style="text-align:right;">							
  			</div>
  		</div>
  	</div>
  </div>
<% end %>


<div class="bar_search" style="top:45px;padding:15px;">
	<div class="nmn inline_block_middle" style="text-align:center;width:100%;">
		<form action="#">
			<input id="inc_search" placeholder="Search" type="text" required="">
		</form>
	</div>
</div>

<div style="height:45px;"></div>
<div style="height:55px;"></div>				
<div id='movie_list'>
  <%= render partial: 'movie_list' %>
</div>	
<div style="height:1vh;"></div>

<%#インクリメンタルサーチjs%>
<script defer>
	$(function(){
		var
		preFunc = null,
		preInput = '',
		input = '',
		ajaxPost = function(input)
		{
		  $.ajax({
		    url: "ajax_movie_list",
		      type: "GET",
		      data: ("q=" + input)
		  });
		};
		$('#inc_search').on('input',function(){
		  input = $(this).val();   //前後の不要な空白を削除
		  if(preInput !== input){
		    clearTimeout(preFunc);
		    preFunc = setTimeout(ajaxPost(input), 800);
		  }
		  preInput = input;
		});
		$('#inc_search').keypress(function(e) {
			if ( e.which == 13 ) {
			// ここに処理を書く
			clearTimeout(preFunc);
		    preFunc = setTimeout(ajaxPost(input), 0);
			// スマホのキーボードを閉じる
			  $("#inc_search").blur();
			   return false;
			}
		})
	});
</script>